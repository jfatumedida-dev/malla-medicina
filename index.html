<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Medicina UBA</title>

<style>
body{
 font-family:'Segoe UI',sans-serif;
 margin:0;
 padding:20px;
 background:#e9fbfa;
 overflow-x:auto;
 color:#184a4a;
}

/* LOGO */
header{
 text-align:center;
 margin-bottom:10px;
}
header img{
 height:80px;
}

/* STICKERS FONDO */
.bgimg{
 position:fixed;
 opacity:0.08;
 z-index:-1;
}
.i1{top:40px;left:30px;width:220px;}
.i2{top:200px;right:40px;width:200px;}
.i3{bottom:50px;left:50px;width:180px;}
.i4{bottom:80px;right:80px;width:160px;}
.i5{top:400px;left:10px;width:150px;}
.i6{top:500px;right:20px;width:180px;}

/* GRID */
.row{
 display:flex;
 gap:18px;
 margin-bottom:20px;
}

.col{
 display:flex;
 flex-direction:column;
 gap:12px;
 min-width:260px;
}

.block{
 background:white;
 border-radius:14px;
 padding:10px;
 border-top:8px solid #21cfc8;
 box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

.block h3{
 text-align:center;
 margin:4px 0 8px 0;
 color:#1aa7a1;
}

.subject{
 background:#d6f6f3;
 border:1px solid #b2ece8;
 border-radius:8px;
 padding:6px;
 margin:4px 0;
 font-size:13px;
 cursor:pointer;
 transition:0.15s;
}
.subject:hover{transform:scale(1.03);}
.approved{background:#b8f0c9;text-decoration:line-through;}
.locked{background:#eee;color:#888;cursor:not-allowed;}
</style>
</head>

<body>

<header>
 <img src="logo_fmed.png">
</header>

<!-- FONDO -->
<img src="corazon.png" class="bgimg i1">
<img src="cerebro.png" class="bgimg i2">
<img src="craneo.png" class="bgimg i3">
<img src="tubo.png" class="bgimg i4">
<img src="caduceo.png" class="bgimg i5">
<img src="estetoscopio.png" class="bgimg i6">

<div id="app"></div>

<script>
const KEY="mallaMed";
let prog=JSON.parse(localStorage.getItem(KEY))||{};
function save(){localStorage.setItem(KEY,JSON.stringify(prog));}
function ok(id){return prog[id]===true;}

// MATERIAS
const S=[
// CBC
{id:"q",n:"Química",g:"cbc"},
{id:"se",n:"Sociedad y Estado",g:"cbc"},
{id:"ipc",n:"Pensamiento Científico",g:"cbc"},
{id:"mat",n:"Matemática",g:"cbc"},
{id:"biof",n:"Biofísica",g:"cbc"},
{id:"biocel",n:"Biología Celular",g:"cbc"},

// BIO 1
{id:"ana",n:"Anatomía",r:["CBC"],g:"bio1"},
{id:"hist",n:"Histología",r:["CBC"],g:"bio1"},
{id:"embr",n:"Embriología",r:["CBC"],g:"bio1"},
{id:"gen",n:"Genética",r:["CBC"],g:"bio1"},

// BIO 2
{id:"fis",n:"Fisiología y Biofísica",r:["ana","hist"],g:"bio2"},
{id:"bioq",n:"Bioquímica",r:["ana","hist"],g:"bio2"},
{id:"inmu",n:"Inmunología",r:["ana","hist"],g:"bio2"},
{id:"micro",n:"Microbiología",r:["inmu","bioq"],g:"bio2"},

// COMPLEMENTARIAS
{id:"sm",n:"Salud Mental",g:"comp"},
{id:"sp",n:"Salud Pública",g:"comp"},
{id:"bioe",n:"Bioética",g:"comp"},
{id:"ing",n:"Inglés Técnico",g:"comp"},

// 3
{id:"meda",n:"Medicina A",r:["BIOM"],g:"y3"},
{id:"pato",n:"Patología",r:["BIOM"],g:"y3"},
{id:"f1",n:"Farmacología I",r:["BIOM"],g:"y3"},

// CLIN
{id:"tox",n:"Toxicología",r:["f1"],g:"clin"},
{id:"f2",n:"Farmacología II",r:["f1","meda"],g:"clin"},
{id:"legal",n:"Medicina Legal",g:"clin"},

// 4
{id:"medb",n:"Medicina B",r:["meda","pato"],g:"y4"},
{id:"nut",n:"Nutrición",r:["meda","pato"],g:"y4"},
{id:"derm",n:"Dermatología",r:["meda","pato"],g:"y4"},
{id:"inf",n:"Infectología",r:["meda","pato"],g:"y4"},
{id:"neu",n:"Neumonología",r:["meda","pato"],g:"y4"},
{id:"neuro",n:"Neurología",r:["meda","pato"],g:"y4"},
{id:"img",n:"Diagnóstico por Imágenes",r:["meda","pato"],g:"y4"},
{id:"psiq",n:"Psiquiatría",r:["meda","pato","sm"],g:"y4"},

// 5
{id:"ped",n:"Pediatría",r:["meda","pato"],g:"y5"},
{id:"obs",n:"Obstetricia",r:["meda","pato"],g:"y5"},
{id:"gin",n:"Ginecología",r:["meda","pato"],g:"y5"},
{id:"cir",n:"Cirugía General",r:["meda","pato"],g:"y5"},
{id:"uro",n:"Urología",r:["meda","pato"],g:"y5"},
{id:"tra",n:"Traumatología",r:["meda","pato"],g:"y5"},
{id:"oft",n:"Oftalmología",r:["meda","pato"],g:"y5"},
{id:"orl",n:"Otorrinolaringología",r:["meda","pato"],g:"y5"},
{id:"neuroc",n:"Neurocirugía",r:["meda","pato"],g:"y5"},

// PFO
{id:"fam",n:"Medicina Familiar",r:["ALL"],g:"pfo"},
{id:"eme",n:"Emergentología",r:["ALL"],g:"pfo"},
{id:"com",n:"Prácticas Comunitarias",r:["ALL"],g:"pfo"},
];

function CBC(){return S.filter(s=>s.g==="cbc").every(s=>ok(s.id));}
function BIOM(){return S.filter(s=>s.g==="bio1"||s.g==="bio2").every(s=>ok(s.id));}
function ALL(){return S.every(s=>ok(s.id));}

function unlocked(s){
 if(!s.r) return true;
 return s.r.every(r=>{
  if(r==="CBC")return CBC();
  if(r==="BIOM")return BIOM();
  if(r==="ALL")return ALL();
  return ok(r);
 });
}

function block(title,list){
 let h=`<div class='block'><h3>${title}</h3>`;
 list.forEach(s=>{
  let c="subject";
  if(ok(s.id)) c+=" approved";
  else if(!unlocked(s)) c+=" locked";
  h+=`<div class='${c}' onclick="toggle('${s.id}')" title="Correlativas pendientes">${s.n}</div>`;
 });
 return h+"</div>";
}

function toggle(id){
 let s=S.find(x=>x.id===id);
 if(!unlocked(s))return;
 prog[id]=!ok(id); save(); render();
}

function render(){
 document.getElementById("app").innerHTML=`

<div class='row'>
 <div class='col'>
  ${block("CBC",S.filter(s=>s.g==="cbc"))}
  ${block("Complementarias",S.filter(s=>s.g==="comp"))}
 </div>

 <div class='col'>
  ${block("Biomédico 1°",S.filter(s=>s.g==="bio1"))}
  ${block("Biomédico 2°",S.filter(s=>s.g==="bio2"))}
 </div>

 <div class='col'>
  ${block("3° Año",S.filter(s=>s.g==="y3"))}
  ${block("Ciclo Clínico",S.filter(s=>s.g==="clin"))}
 </div>
</div>

<div class='row'>
 <div class='col'>
  ${block("4° Clínicas",S.filter(s=>s.g==="y4"))}
 </div>

 <div class='col'>
  ${block("5° Quirúrgicas",S.filter(s=>s.g==="y5"))}
 </div>

 <div class='col'>
  ${block("PFO",S.filter(s=>s.g==="pfo"))}
 </div>
</div>
`;
}

render();
</script>

</body>
</html>
