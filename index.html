<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Medicina UBA</title>

<style>
body{
  font-family:'Segoe UI',sans-serif;
  background:#e8fbf9;
  margin:0;
  padding:20px;
  color:#214c4c;
}

header{
  text-align:center;
  margin-bottom:15px;
}

header img{
  height:70px;
}

h1{
  margin:5px 0;
  color:#1aa7a1;
}

/* stickers */
.sticker{
  position:fixed;
  font-size:26px;
  opacity:0.15;
  pointer-events:none;
}
.s1{top:30px;left:30px;}
.s2{top:200px;right:40px;}
.s3{bottom:50px;left:60px;}
.s4{bottom:80px;right:80px;}
.s5{top:400px;left:20px;}

.grid{
  display:flex;
  gap:16px;
  overflow-x:auto;
}

.col{
  min-width:260px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.block{
  background:white;
  border-radius:14px;
  padding:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  border-top:8px solid #27d3cd;
}

.block h3{
  margin:3px 0 8px 0;
  text-align:center;
  color:#1aa7a1;
  font-size:15px;
}

.subject{
  background:#d5f6f3;
  border:1px solid #b6ece8;
  border-radius:8px;
  padding:6px;
  margin:5px 0;
  cursor:pointer;
  font-size:13px;
  transition:0.15s;
}

.subject:hover{transform:scale(1.03);}

.approved{
  background:#b8f0c9;
  text-decoration:line-through;
}

.locked{
  background:#eee;
  color:#888;
  cursor:not-allowed;
}
</style>
</head>

<body>

<header>
<img src="https://upload.wikimedia.org/wikipedia/commons/1/1a/UBA.svg">
<h1>Plan de Estudios ‚Äì Medicina UBA</h1>
</header>

<!-- stickers -->
<div class="sticker s1">ü©∫</div>
<div class="sticker s2">üíâ</div>
<div class="sticker s3">üß¨</div>
<div class="sticker s4">üß†</div>
<div class="sticker s5">‚ù§Ô∏è</div>

<div class="grid" id="grid"></div>

<script>
const KEY="mallaMedUBA";
let progress=JSON.parse(localStorage.getItem(KEY))||{};
function save(){localStorage.setItem(KEY,JSON.stringify(progress));}
function ok(id){return progress[id]===true;}

const subjects=[

// CBC
{id:"quimica",name:"Qu√≠mica",group:"cbc"},
{id:"sociedad",name:"Sociedad y Estado",group:"cbc"},
{id:"ipc",name:"Pensamiento Cient√≠fico",group:"cbc"},
{id:"matematica",name:"Matem√°tica",group:"cbc"},
{id:"fisica",name:"Biof√≠sica",group:"cbc"},
{id:"biologia",name:"Biolog√≠a Celular",group:"cbc"},

// Biom√©dico 1
{id:"anatomia",name:"Anatom√≠a",req:["CBC"],group:"bio1"},
{id:"histologia",name:"Histolog√≠a",req:["CBC"],group:"bio1"},
{id:"embriologia",name:"Embriolog√≠a",req:["CBC"],group:"bio1"},
{id:"genetica",name:"Gen√©tica",req:["CBC"],group:"bio1"},

// Biom√©dico 2
{id:"fisiologia",name:"Fisiolog√≠a y Biof√≠sica",req:["anatomia","histologia"],group:"bio2"},
{id:"bioquimica",name:"Bioqu√≠mica",req:["anatomia","histologia"],group:"bio2"},
{id:"inmunologia",name:"Inmunolog√≠a",req:["anatomia","histologia"],group:"bio2"},
{id:"microbiologia",name:"Microbiolog√≠a",req:["inmunologia","bioquimica"],group:"bio2"},

// Complementarias
{id:"saludmental",name:"Salud Mental",group:"comp"},
{id:"saludpublica",name:"Salud P√∫blica",group:"comp"},
{id:"bioetica",name:"Bio√©tica",group:"comp"},
{id:"ingles",name:"Ingl√©s T√©cnico",group:"comp"},

// 3
{id:"medA",name:"Medicina A",req:["BIOMED"],group:"y3"},
{id:"patologia",name:"Patolog√≠a",req:["BIOMED"],group:"y3"},
{id:"farm1",name:"Farmacolog√≠a I",req:["BIOMED"],group:"y3"},

// cl√≠nico
{id:"toxico",name:"Toxicolog√≠a",req:["farm1"],group:"clin"},
{id:"farm2",name:"Farmacolog√≠a II",req:["farm1","medA"],group:"clin"},
{id:"legal",name:"Medicina Legal",group:"clin"},

// 4
{id:"medB",name:"Medicina B",req:["medA","patologia"],group:"y4"},
{id:"nutricion",name:"Nutrici√≥n",req:["medA","patologia"],group:"y4"},
{id:"derma",name:"Dermatolog√≠a",req:["medA","patologia"],group:"y4"},
{id:"infecto",name:"Infectolog√≠a",req:["medA","patologia"],group:"y4"},
{id:"neumo",name:"Neumonolog√≠a",req:["medA","patologia"],group:"y4"},
{id:"neuro",name:"Neurolog√≠a",req:["medA","patologia"],group:"y4"},
{id:"imagenes",name:"Diagn√≥stico por Im√°genes",req:["medA","patologia"],group:"y4"},
{id:"psiquiatria",name:"Psiquiatr√≠a",req:["medA","patologia","saludmental"],group:"y4"},

// 5
{id:"pediatria",name:"Pediatr√≠a",req:["medA","patologia"],group:"y5"},
{id:"obste",name:"Obstetricia",req:["medA","patologia"],group:"y5"},
{id:"gine",name:"Ginecolog√≠a",req:["medA","patologia"],group:"y5"},
{id:"cirugia",name:"Cirug√≠a General",req:["medA","patologia"],group:"y5"},
{id:"uro",name:"Urolog√≠a",req:["medA","patologia"],group:"y5"},
{id:"trauma",name:"Traumatolog√≠a",req:["medA","patologia"],group:"y5"},
{id:"oftalmo",name:"Oftalmolog√≠a",req:["medA","patologia"],group:"y5"},
{id:"orl",name:"Otorrino",req:["medA","patologia"],group:"y5"},
{id:"neurocir",name:"Neurocirug√≠a",req:["medA","patologia"],group:"y5"},

// PFO
{id:"familiar",name:"Medicina Familiar",req:["ALL"],group:"pfo"},
{id:"emergen",name:"Emergentolog√≠a",req:["ALL"],group:"pfo"},
{id:"comunitaria",name:"Pr√°cticas Comunitarias",req:["ALL"],group:"pfo"},
];

// reglas
function CBCok(){return subjects.filter(s=>s.group==="cbc").every(s=>ok(s.id));}
function BIOMEDok(){return subjects.filter(s=>s.group==="bio1"||s.group==="bio2").every(s=>ok(s.id));}
function ALLok(){return subjects.every(s=>ok(s.id));}

function unlocked(sub){
 if(!sub.req) return true;
 return sub.req.every(r=>{
  if(r==="CBC") return CBCok();
  if(r==="BIOMED") return BIOMEDok();
  if(r==="ALL") return ALLok();
  return ok(r);
 });
}

function renderBlock(title,list){
 let html=`<div class="block"><h3>${title}</h3>`;
 list.forEach(sub=>{
  let cls="subject";
  if(ok(sub.id)) cls+=" approved";
  else if(!unlocked(sub)) cls+=" locked";
  html+=`<div class="${cls}" title="Faltan correlativas" onclick="toggle('${sub.id}')">${sub.name}</div>`;
 });
 html+="</div>";
 return html;
}

function toggle(id){
 const sub=subjects.find(s=>s.id===id);
 if(!unlocked(sub)) return;
 progress[id]=!ok(id);
 save();
 render();
}

function render(){
 const g=document.getElementById("grid");
 g.innerHTML=`
 <div class="col">
 ${renderBlock("CBC",subjects.filter(s=>s.group==="cbc"))}
 ${renderBlock("Complementarias",subjects.filter(s=>s.group==="comp"))}
 </div>

 <div class="col">
 ${renderBlock("Biom√©dico ‚Äì 1¬∞ A√±o",subjects.filter(s=>s.group==="bio1"))}
 ${renderBlock("Biom√©dico ‚Äì 2¬∞ A√±o",subjects.filter(s=>s.group==="bio2"))}
 </div>

 <div class="col">
 ${renderBlock("3¬∞ A√±o",subjects.filter(s=>s.group==="y3"))}
 ${renderBlock("Ciclo Cl√≠nico",subjects.filter(s=>s.group==="clin"))}
 </div>

 <div class="col">
 ${renderBlock("4¬∞ A√±o ‚Äì Cl√≠nicas",subjects.filter(s=>s.group==="y4"))}
 </div>

 <div class="col">
 ${renderBlock("5¬∞ A√±o ‚Äì Quir√∫rgicas",subjects.filter(s=>s.group==="y5"))}
 ${renderBlock("PFO",subjects.filter(s=>s.group==="pfo"))}
 </div>
 `;
}

render();
</script>

</body>
</html>
